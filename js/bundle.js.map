{"version":3,"sources":["webpack:///webpack/bootstrap de55dcdc722cccc3bb23","webpack:///./js/main.js","webpack:///./js/mesh.js","webpack:///./js/airfoil.js","webpack:///./js/airfoils/NACA2412.js","webpack:///./js/airfoils/NACA6409.js","webpack:///./js/math.js"],"names":["$","canvas","angle","width","height","window","stepCount","startTime","speed","Number","text","steps","viscosity","contrast","time","running","pxPerSquare","ctx","getContext","image","createImageData","i","data","length","mesh","Math","ceil","click","animate","change","e","updateAngle","resetTimer","adjustSpeed","adjustViscosity","adjustContrast","initTracers","html","reset","simulate","currentTarget","value","airfoil","parseInt","updateBarrier","paintCanvas","Date","getTime","checked","nRows","sqrt","nTracers","dx","xdim","dy","ydim","nextX","nextY","t","tracerX","tracerY","stepsPerFrame","setBoundaries","step","collide","stream","moveTracers","setTimeout","stable","x","index","rho","alert","initFluid","Mesh","n0","Array","nN","nS","nE","nW","nNE","nSE","nNW","nSW","ux","uy","curl","barrier","y","transBlackArraySize","transBlackArray","toFixed","calcCoords","coords","forEach","coord","floor","centroid","setColors","r","g","b","fy","py","px","nColors","redList","greenList","blueList","c","round","u0","setEquil","cIndex","pow","computeCurl","colorSquare","putImageData","drawTracers","newux","newuy","newrho","ux3","uy3","ux2","uy2","uxuy2","u2","u215","omega","thisrho","thisux","thisuy","one9thrho","one36thrho","roundedX","roundedY","random","fillStyle","canvasX","canvasY","fillRect","polygon","inside","j","xi","yi","xj","yj","intersect","Airfoil","aAttack","x_sum","y_sum","map","point","x_coor","y_coor","NACA2412","module","exports","NACA6409","multiply","A","B","canMultiply","out","sum","push","rotation","theta","cos","sin","subtract","add","degToRads","deg","PI"],"mappings":"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","file":"./js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap de55dcdc722cccc3bb23","import Mesh from './mesh';\n\n$( () => {\n  const canvas = $(\"#canvas\")[0];\n  const angle = $(\"#range\")[0];\n\n  canvas.width = 300;\n  canvas.height = 300;\n  window.stepCount = 0;\n  window.startTime = 0;\n  window.speed = Number($(\"#speedValue\").text());\n  window.steps = 20;\n  window.viscosity = 0.02;\n  window.contrast = 0;\n  window.time = 0;\n  window.running = false;\n  window.pxPerSquare = 1;\n\n  const ctx = canvas.getContext(\"2d\");\n  const image = ctx.createImageData(canvas.width, canvas.height);\t// faster than clearRect\n  for (let i = 3; i < image.data.length; i += 4) {\n    image.data[i] = 255;\t\t\t// set all alpha values to opaque\n  }\n\n  const mesh = new Mesh(ctx, Math.ceil(canvas.width/window.pxPerSquare), Math.ceil(canvas.height/window.pxPerSquare), image)\n\n  $(\"#animate\").click(() => animate(mesh));\n  $(\"#angleSlider\").change((e) => updateAngle(e, mesh));\n  $(\"#stepSlider\").change((e) => resetTimer(e));\n  $(\"#speedSlider\").change((e) => adjustSpeed(e));\n  $(\"#viscSlider\").change((e) => adjustViscosity(e));\n  $(\"#contrastSlider\").change((e) => adjustContrast(e, mesh));\n  $(\"#tracerCheck\").change((e) => initTracers(e, mesh));\n});\n\nfunction animate(mesh) {\n  window.running = !window.running;\n  if (window.running) {\n    $(\"#animate\").html(\"Pause\");\n    reset();\n    simulate(mesh);\n  } else {\n    $(\"#animate\").html(\"Run\");\n  }\n}\n\nfunction updateAngle(e, mesh) {\n  $(\"#angleValue\").html(e.currentTarget.value);\n  mesh.airfoil.updateAngle(parseInt(e.currentTarget.value));\n  mesh.updateBarrier();\n  mesh.paintCanvas();\n}\n\nfunction adjustSpeed(e) {\n  $(\"#speedValue\").html(e.currentTarget.value);\n  window.speed = e.currentTarget.value;\n}\n\nfunction adjustViscosity(e) {\n  $(\"#viscValue\").html(e.currentTarget.value);\n  window.viscosity = Number(e.currentTarget.value);\n}\n\nfunction reset() {\n  window.stepCount = 0;\n  window.startTime = (new Date()).getTime();\n}\n\nfunction resetTimer(e) {\n  $(\"#stepValue\").html(e.currentTarget.value);\n  window.steps = Number(e.currentTarget.value);\n  reset();\n}\n\nfunction adjustContrast(e, mesh) {\n  $(\"#contrastValue\").html(e.currentTarget.value);\n  window.contrast = Number(e.currentTarget.value);\n  mesh.paintCanvas();\n}\n\nfunction initTracers(e, mesh) {\n  if (e.currentTarget.checked) {\n    let nRows = Math.ceil(Math.sqrt(mesh.nTracers));\n    let dx = mesh.xdim / nRows;\n    let dy = mesh.ydim / nRows;\n    let nextX = dx / 2;\n    let nextY = dy / 2;\n    for (let t = 0; t < mesh.nTracers; t++) {\n      mesh.tracerX[t] = nextX;\n      mesh.tracerY[t] = nextY;\n      nextX += dx;\n      if (nextX > mesh.xdim) {\n        nextX = dx / 2;\n        nextY += dy;\n      }\n    }\n  }\n  mesh.paintCanvas();\n}\n\nfunction simulate(mesh) {\n  let stepsPerFrame = Number(window.steps);\t\t\t// number of simulation steps per animation frame\n  mesh.setBoundaries();\n\n  // Execute a bunch of time steps:\n  for (let step = 0; step < stepsPerFrame; step++) {\n    mesh.collide();\n    mesh.stream();\n    if ($(\"#tracerCheck\")[0].checked) mesh.moveTracers();\n    window.time++;\n  }\n\n  mesh.paintCanvas();\n\n  if (window.running) {\n    window.stepCount += stepsPerFrame;\n    window.setTimeout(() => simulate(mesh), 1);\n  }\n\n  let stable = true;\n  for (let x = 0; x < mesh.xdim; x++) {\n    var index = x + (mesh.ydim/2)*mesh.xdim;\t// look at middle row only\n    if (mesh.rho[index] <= 0) stable = false;\n  }\n\n  if (!stable) {\n    window.alert(\"The simulation has become unstable due to excessive fluid speeds.\");\n    animate(mesh);\n    mesh.initFluid();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","import Airfoil from './airfoil';\n\nexport default class Mesh {\n  constructor(ctx, xdim, ydim, image) {\n    this.ctx = ctx;\n    this.image = image;\n    this.xdim = xdim;\n    this.ydim = ydim;\n\n    // Create the arrays of fluid particle densities, etc. (using 1D arrays for speed):\n    // To index into these arrays, use x + y*xdim, traversing rows first and then columns.\n    this.n0 = new Array(xdim*ydim);\t\t\t// microscopic densities along each lattice direction\n    this.nN = new Array(xdim*ydim);\n    this.nS = new Array(xdim*ydim);\n    this.nE = new Array(xdim*ydim);\n    this.nW = new Array(xdim*ydim);\n    this.nNE = new Array(xdim*ydim);\n    this.nSE = new Array(xdim*ydim);\n    this.nNW = new Array(xdim*ydim);\n    this.nSW = new Array(xdim*ydim);\n    this.rho = new Array(xdim*ydim);\t\t\t// macroscopic density\n    this.ux = new Array(xdim*ydim);\t\t\t// macroscopic velocity\n    this.uy = new Array(xdim*ydim);\n    this.curl = new Array(xdim*ydim);\n    this.barrier = new Array(xdim*ydim);\t\t// boolean array of barrier locations\n\n    // Initialize to a steady rightward flow with no barriers:\n    for (let y = 0; y < ydim; y++) {\n      for (let x = 0; x < xdim; x++) {\n        this.barrier[x+y*xdim] = false;\n      }\n    }\n    // Initialize array of partially transparant blacks, for drawing flow lines:\n    const transBlackArraySize = 50;\n    this.transBlackArray = new Array(transBlackArraySize);\n    for (let i = 0; i < transBlackArraySize; i++) {\n      this.transBlackArray[i] = \"rgba(0,0,0,\" + Number(i/transBlackArraySize).toFixed(2) + \")\";\n    }\n\n    // Initialize tracers (but don't place them yet):\n    this.nTracers = 144;\n    this.tracerX = new Array(this.nTracers);\n    this.tracerY = new Array(this.nTracers);\n    for (let t = 0; t < this.nTracers; t++) {\n      this.tracerX[t] = 0.0; this.tracerY[t] = 0.0;\n    }\n\n    // Initialize airfoil and generate barrier points:\n    this.airfoil = new Airfoil(ctx, 0)\n    this.airfoil.calcCoords();\n    let x, y, i;\n    this.airfoil.coords.forEach( (coord) => {\n      x = Math.floor(coord[0]);\n      y = Math.floor(coord[1]);\n      i = x+y*xdim;\n      this.barrier[i] = true;\n    });\n\n    this.barrier[Math.floor(this.airfoil.centroid[0])+Math.floor(this.airfoil.centroid[1])*xdim] = true;\n\n    this.setColors();\n    this.initFluid();\n  }\n\n  colorSquare(x, y, r, g, b) {\n    let fy = this.ydim - y - 1;\n    let index;\n    for (let py = fy * window.pxPerSquare; py < (fy + 1) * window.pxPerSquare; py++) {\n      for (let px = x * window.pxPerSquare; px < (x + 1) * window.pxPerSquare; px++) {\n        index = (px + py*this.image.width) * 4;\n        this.image.data[index+0] = r;\n        this.image.data[index+1] = g;\n        this.image.data[index+2] = b;\n      }\n    }\n  }\n\n  updateBarrier() {\n    for (let y = 0; y < this.ydim; y++) {\n      for (let x = 0; x < this.xdim; x++) {\n        this.barrier[x+y*this.xdim] = false;\n      }\n    }\n\n    this.airfoil.calcCoords();\n    let x, y, i;\n    this.airfoil.coords.forEach( (coord) => {\n      x = Math.floor(coord[0]);\n      y = Math.floor(coord[1]);\n      i = x+y*this.xdim;\n      this.barrier[i] = true;\n    });\n\n    this.barrier[Math.floor(this.airfoil.centroid[0])+Math.floor(this.airfoil.centroid[1])*this.xdim] = true;\n  }\n\n  setColors() {\n    // Set up the array of colors for plotting (mimicks matplotlib \"jet\" colormap):\n    // (Kludge: Index nColors+1 labels the color used for drawing barriers.)\n    var nColors = 400;\t\t\t\t\t\t\t// there are actually nColors+2 colors\n    this.redList = new Array(nColors+2);\n    this.greenList = new Array(nColors+2);\n    this.blueList = new Array(nColors+2);\n    for (var c=0; c<=nColors; c++) {\n      var r, g, b;\n      if (c < nColors/8) {\n        r = 0; g = 0; b = Math.round(255 * (c + nColors/8) / (nColors/4));\n      } else if (c < 3*nColors/8) {\n        r = 0; g = Math.round(255 * (c - nColors/8) / (nColors/4)); b = 255;\n      } else if (c < 5*nColors/8) {\n        r = Math.round(255 * (c - 3*nColors/8) / (nColors/4)); g = 255; b = 255 - r;\n      } else if (c < 7*nColors/8) {\n        r = 255; g = Math.round(255 * (7*nColors/8 - c) / (nColors/4)); b = 0;\n      } else {\n        r = Math.round(255 * (9*nColors/8 - c) / (nColors/4)); g = 0; b = 0;\n      }\n      this.redList[c] = r; this.greenList[c] = g; this.blueList[c] = b;\n    }\n    this.redList[nColors+1] = 0; this.greenList[nColors+1] = 0; this.blueList[nColors+1] = 0;\t// barriers are black\n  }\n\n  initFluid() {\n    const u0 = Number(window.speed);\n    for (let y = 0; y < this.ydim; y++) {\n      for (let x = 0; x < this.xdim; x++) {\n        this.setEquil(x, y, u0, 0, 1);\n        this.curl[x+y*this.xdim] = 0.0;\n      }\n    }\n    this.paintCanvas();\n  }\n\n  paintCanvas() {\n\t\tlet cIndex = 0;\n\t\tconst contrast = Math.pow(1.2, Number(window.contrast));\n    const nColors = 400;\n\n\t\tthis.computeCurl();\n\t\tfor (let y = 0; y < this.ydim; y++) {\n\t\t\tfor (let x = 0; x < this.xdim; x++) {\n\t\t\t\tif (this.barrier[x+y*this.xdim]) {\n\t\t\t\t\tcIndex = nColors + 1;\t// kludge for barrier color which isn't really part of color map\n\t\t\t\t} else {\n\t\t\t\t\tcIndex = Math.round(nColors * (this.curl[x+y*this.xdim]*5*contrast + 0.5));\n\t\t\t\t\tif (cIndex < 0) cIndex = 0;\n\t\t\t\t\tif (cIndex > nColors) cIndex = nColors;\n\t\t\t\t}\n\t\t\t\tthis.colorSquare(x, y, this.redList[cIndex], this.greenList[cIndex], this.blueList[cIndex]);\n\t\t\t}\n\t\t}\n\n    this.ctx.putImageData(this.image, 0, 0);\t\t// blast image to the screen\n\t\t// Draw tracers if appropriate:\n\t\tif ($(\"#tracerCheck\")[0].checked) this.drawTracers();\n  }\n\n  // Compute the curl (actually times 2) of the macroscopic velocity field, for plotting:\n  computeCurl() {\n    for (let y = 1; y < this.ydim - 1; y++) {\t\t\t// interior sites only; leave edges set to zero\n      for (let x = 1; x < this.xdim - 1; x++) {\n        this.curl[x+y*this.xdim] = this.uy[x+1+y*this.xdim] - this.uy[x-1+y*this.xdim] - this.ux[x+(y+1)*this.xdim] + this.ux[x+(y-1)*this.xdim];\n      }\n    }\n  }\n\n  setEquil(x, y, newux, newuy, newrho) {\n\t\tconst i = x + y*this.xdim;\n\t\tif (typeof newrho == 'undefined') {\n\t\t\tnewrho = rho[i];\n\t\t}\n\t\tconst ux3 = 3 * newux;\n\t\tconst uy3 = 3 * newuy;\n\t\tconst ux2 = newux * newux;\n\t\tconst uy2 = newuy * newuy;\n\t\tconst uxuy2 = 2 * newux * newuy;\n\t\tconst u2 = ux2 + uy2;\n\t\tconst u215 = 1.5 * u2;\n\t\tthis.n0[i]  = (4.0 / 9.0) * newrho *  (1                              - u215);\n\t\tthis.nE[i]  = (1.0 / 9.0) * newrho *  (1 + ux3       + 4.5*ux2        - u215);\n\t\tthis.nW[i]  = (1.0 / 9.0) * newrho *  (1 - ux3       + 4.5*ux2        - u215);\n\t\tthis.nN[i]  = (1.0 / 9.0) * newrho *  (1 + uy3       + 4.5*uy2        - u215);\n\t\tthis.nS[i]  = (1.0 / 9.0) * newrho *  (1 - uy3       + 4.5*uy2        - u215);\n\t\tthis.nNE[i] = (1.0 / 36.0) * newrho * (1 + ux3 + uy3 + 4.5*(u2+uxuy2) - u215);\n\t\tthis.nSE[i] = (1.0 / 36.0) * newrho * (1 + ux3 - uy3 + 4.5*(u2-uxuy2) - u215);\n\t\tthis.nNW[i] = (1.0 / 36.0) * newrho * (1 - ux3 + uy3 + 4.5*(u2-uxuy2) - u215);\n\t\tthis.nSW[i] = (1.0 / 36.0) * newrho * (1 - ux3 - uy3 + 4.5*(u2+uxuy2) - u215);\n\t\tthis.rho[i] = newrho;\n\t\tthis.ux[i] = newux;\n\t\tthis.uy[i] = newuy;\n\t}\n\n  setBoundaries() {\n    const u0 = Number(window.speed);\n\n    for (let x = 0; x < this.xdim; x++) {\n      this.setEquil(x, 0, u0, 0, 1);\n      this.setEquil(x, this.ydim-1, u0, 0, 1);\n    }\n\n    for (let y = 1; y < this.ydim - 1; y++) {\n      this.setEquil(0, y, u0, 0, 1);\n      this.setEquil(this.xdim-1, y, u0, 0, 1);\n    }\n  }\n\n  collide() {\n\t\tconst viscosity = window.viscosity;\t// kinematic viscosity coefficient in natural units\n\t\tconst omega = 1 / (3*viscosity + 0.5);\t\t// reciprocal of relaxation time\n\n    let i, thisrho, thisux, thisuy;\n\n\t\tfor (let y = 1; y < this.ydim - 1; y++) {\n\t\t\tfor (let x = 1; x < this.xdim - 1; x++) {\n\t\t\t\ti = x + y * this.xdim;\t\t// array index for this lattice site\n\n\t\t\t\tthisrho = this.n0[i] + this.nN[i] + this.nS[i] + this.nE[i] + this.nW[i] + this.nNW[i] + this.nNE[i] + this.nSW[i] + this.nSE[i];\n        thisux = (this.nE[i] + this.nNE[i] + this.nSE[i] - this.nW[i] - this.nNW[i] - this.nSW[i]) / thisrho;\n        thisuy = (this.nN[i] + this.nNE[i] + this.nNW[i] - this.nS[i] - this.nSE[i] - this.nSW[i]) / thisrho;\n\n\t\t\t\tthis.rho[i] = thisrho;\n\t\t\t\tthis.ux[i] = thisux;\n\t\t\t\tthis.uy[i] = thisuy;\n\n\t\t\t\tvar one9thrho = (1.0 / 9.0) * thisrho;\t\t// pre-compute a bunch of stuff for optimization\n\t\t\t\tvar one36thrho = (1.0 / 36.0) * thisrho;\n\t\t\t\tvar ux3 = 3 * thisux;\n\t\t\t\tvar uy3 = 3 * thisuy;\n\t\t\t\tvar ux2 = thisux * thisux;\n\t\t\t\tvar uy2 = thisuy * thisuy;\n\t\t\t\tvar uxuy2 = 2 * thisux * thisuy;\n\t\t\t\tvar u2 = ux2 + uy2;\n\t\t\t\tvar u215 = 1.5 * u2;\n\n\t\t\t\tthis.n0[i]  += omega * ((4.0 / 9.0)*thisrho * (1                       - u215) - this.n0[i]);\n\t\t\t\tthis.nE[i]  += omega * (   one9thrho * (1 + ux3       + 4.5*ux2        - u215) - this.nE[i]);\n\t\t\t\tthis.nW[i]  += omega * (   one9thrho * (1 - ux3       + 4.5*ux2        - u215) - this.nW[i]);\n\t\t\t\tthis.nN[i]  += omega * (   one9thrho * (1 + uy3       + 4.5*uy2        - u215) - this.nN[i]);\n\t\t\t\tthis.nS[i]  += omega * (   one9thrho * (1 - uy3       + 4.5*uy2        - u215) - this.nS[i]);\n\t\t\t\tthis.nNE[i] += omega * (  one36thrho * (1 + ux3 + uy3 + 4.5*(u2+uxuy2) - u215) - this.nNE[i]);\n\t\t\t\tthis.nSE[i] += omega * (  one36thrho * (1 + ux3 - uy3 + 4.5*(u2-uxuy2) - u215) - this.nSE[i]);\n\t\t\t\tthis.nNW[i] += omega * (  one36thrho * (1 - ux3 + uy3 + 4.5*(u2-uxuy2) - u215) - this.nNW[i]);\n\t\t\t\tthis.nSW[i] += omega * (  one36thrho * (1 - ux3 - uy3 + 4.5*(u2+uxuy2) - u215) - this.nSW[i]);\n\t\t\t}\n\t\t}\n\n\t\tfor (let y = 1; y < this.ydim - 2; y++) {\n\t\t\tthis.nW[this.xdim-1+y*this.xdim] = this.nW[this.xdim-2+y*this.xdim];\t\t// at right end, copy left-flowing densities from next row to the left\n\t\t\tthis.nNW[this.xdim-1+y*this.xdim] = this.nNW[this.xdim-2+y*this.xdim];\n\t\t\tthis.nSW[this.xdim-1+y*this.xdim] = this.nSW[this.xdim-2+y*this.xdim];\n\t\t}\n\t}\n\n  // Move particles along their directions of motion:\n\tstream() {\n\t\tfor (let y = this.ydim - 2; y > 0; y--) {\t\t\t// first start in NW corner...\n\t\t\tfor (let x = 1; x < this.xdim - 1; x++) {\n\t\t\t\tthis.nN[x+y*this.xdim] = this.nN[x+(y-1)*this.xdim];\t\t\t// move the north-moving particles\n\t\t\t\tthis.nNW[x+y*this.xdim] = this.nNW[x+1+(y-1)*this.xdim];\t\t// and the northwest-moving particles\n\t\t\t}\n\t\t}\n\t\tfor (let y = this.ydim - 2; y > 0; y--) {\t\t\t// now start in NE corner...\n\t\t\tfor (let x = this.xdim - 2; x > 0; x--) {\n\t\t\t\tthis.nE[x+y*this.xdim] = this.nE[x-1+y*this.xdim];\t\t\t// move the east-moving particles\n\t\t\t\tthis.nNE[x+y*this.xdim] = this.nNE[x-1+(y-1)*this.xdim];\t\t// and the northeast-moving particles\n\t\t\t}\n\t\t}\n\t\tfor (let y = 1; y < this.ydim - 1; y++) {\t\t\t// now start in SE corner...\n\t\t\tfor (let x = this.xdim - 2; x > 0; x--) {\n\t\t\t\tthis.nS[x+y*this.xdim] = this.nS[x+(y+1)*this.xdim];\t\t\t// move the south-moving particles\n\t\t\t\tthis.nSE[x+y*this.xdim] = this.nSE[x-1+(y+1)*this.xdim];\t\t// and the southeast-moving particles\n\t\t\t}\n\t\t}\n\t\tfor (let y = 1; y < this.ydim - 1; y++) {\t\t\t\t// now start in the SW corner...\n\t\t\tfor (let x = 1; x < this.xdim - 1; x++) {\n\t\t\t\tthis.nW[x+y*this.xdim] = this.nW[x+1+y*this.xdim];\t\t\t// move the west-moving particles\n\t\t\t\tthis.nSW[x+y*this.xdim] = this.nSW[x+1+(y+1)*this.xdim];\t\t// and the southwest-moving particles\n\t\t\t}\n\t\t}\n    let index;\n\t\tfor (let y = 1; y < this.ydim - 1; y++) {\t\t\t\t// Now handle bounce-back from barriers\n\t\t\tfor (let x = 1; x < this.xdim - 1; x++) {\n\t\t\t\tif (this.barrier[x+y*this.xdim]) {\n\t\t\t\t\tindex = x + y*this.xdim;\n\t\t\t\t\tthis.nE[x+1+y*this.xdim] = this.nW[index];\n\t\t\t\t\tthis.nW[x-1+y*this.xdim] = this.nE[index];\n\t\t\t\t\tthis.nN[x+(y+1)*this.xdim] = this.nS[index];\n\t\t\t\t\tthis.nS[x+(y-1)*this.xdim] = this.nN[index];\n\t\t\t\t\tthis.nNE[x+1+(y+1)*this.xdim] = this.nSW[index];\n\t\t\t\t\tthis.nNW[x-1+(y+1)*this.xdim] = this.nSE[index];\n\t\t\t\t\tthis.nSE[x+1+(y-1)*this.xdim] = this.nNW[index];\n\t\t\t\t\tthis.nSW[x-1+(y-1)*this.xdim] = this.nNE[index];\n        }\n\t\t\t}\n\t\t}\n\t}\n\n  moveTracers() {\n    let roundedX, roundedY, index;\n    for (let t = 0; t < this.nTracers; t++) {\n      roundedX = Math.round(this.tracerX[t]);\n      roundedY = Math.round(this.tracerY[t]);\n      index = roundedX + roundedY*this.xdim;\n      this.tracerX[t] += this.ux[index];\n      this.tracerY[t] += this.uy[index];\n      if (this.tracerX[t] > this.xdim-1) {\n        this.tracerX[t] = 0;\n        this.tracerY[t] = Math.random() * this.ydim;\n      }\n    }\n  }\n\n  // Draw the tracer particles:\n  drawTracers() {\n    this.ctx.fillStyle = \"rgb(150,150,150)\";\n    for (let t = 0; t < this.nTracers; t++) {\n      var canvasX = (this.tracerX[t]+0.5) * window.pxPerSquare;\n      var canvasY = $(\"#canvas\")[0].height - (this.tracerY[t]+0.5) * window.pxPerSquare;\n      this.ctx.fillRect(canvasX-1, canvasY-1, 2, 2);\n    }\n  }\n\n  pointInPolygon(x, y, polygon) {\n    var inside = false;\n    for(var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n      var xi = polygon[i][0], yi = polygon[i][1];\n      var xj = polygon[j][0], yj = polygon[j][1];\n\n      var intersect = ((yi > y) != (yj > y))\n          && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n      if (intersect) inside = !inside;\n    }\n\n    return inside;\n  }\n}\n\n// bounds: [0, 200], [0,400]\n// [500, 200], [500, 400]\n\n\n\n// WEBPACK FOOTER //\n// ./js/mesh.js","import NACA2412 from './airfoils/NACA2412';\nimport NACA6409 from './airfoils/NACA6409';\nimport { rotation, multiply, subtract, add, degToRads } from './math';\n\nexport default class Airfoil {\n  constructor(ctx, aAttack = 0) {\n    this.ctx = ctx;\n    this.aAttack = degToRads(aAttack);\n  }\n\n  calcCoords() {\n    let x_sum = 0;\n    let y_sum = 0;\n    this.coords = NACA2412.map( (point) => {\n      const x_coor = 150*(point[0]+1)-70;\n      const y_coor = 150*(point[1]+1);\n      x_sum += x_coor;\n      y_sum += y_coor;\n\n      return [x_coor, y_coor];\n    });\n\n    this.centroid = [ x_sum/(this.coords.length), y_sum/(this.coords.length) ];\n    this.coords = subtract(this.coords, this.centroid);\n    this.coords = this.coords.map( (point) => {\n      return multiply(rotation(this.aAttack), point);\n    });\n\n    this.coords = add(this.coords, this.centroid);\n  }\n\n  updateAngle(aAttack) {\n    this.aAttack = degToRads(aAttack);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/airfoil.js","const NACA2412 = [\n  [1.0000, 0.0013],\n  [0.9500, 0.0114],\n  [0.9000, 0.0208],\n  [0.8000, 0.0375],\n  [0.7000, 0.0518],\n  [0.6000, 0.0636],\n  [0.5000, 0.0724],\n  [0.4000, 0.0780],\n  [0.3000, 0.0788],\n  [0.2500, 0.0767],\n  [0.2000, 0.0726],\n  [0.1500, 0.0661],\n  [0.1000, 0.0563],\n  [0.0750, 0.0496],\n  [0.0500, 0.0413],\n  [0.0250, 0.0299],\n  [0.0125, 0.0215],\n  [0.0000, 0.0000],\n  [0.0125, -0.0165],\n  [0.0250, -0.0227],\n  [0.0500, -0.0301],\n  [0.0750, -0.0346],\n  [0.1000, -0.0375],\n  [0.1500, -0.0410],\n  [0.2000, -0.0423],\n  [0.2500, -0.0422],\n  [0.3000, -0.0412],\n  [0.4000, -0.0380],\n  [0.5000, -0.0334],\n  [0.6000, -0.0276],\n  [0.7000, -0.0214],\n  [0.8000, -0.0150],\n  [0.9000, -0.0082],\n  [0.9500, -0.0048],\n  [1.0000, -0.0013]\n];\n\nmodule.exports = NACA2412;\n\n\n\n// WEBPACK FOOTER //\n// ./js/airfoils/NACA2412.js","const NACA6409 = [\n  [1.00000, 0.00000],\n  [0.99732, 0.00084],\n  [0.98930, 0.00333],\n  [0.97603, 0.00737],\n  [0.95760, 0.01284],\n  [0.93423, 0.01954],\n  [0.90615, 0.02724],\n  [0.87357, 0.03571],\n  [0.83690, 0.04464],\n  [0.79647, 0.05378],\n  [0.75272, 0.06283],\n  [0.70608, 0.07153],\n  [0.65710, 0.07961],\n  [0.60627, 0.08684],\n  [0.55413, 0.09302],\n  [0.50132, 0.09796],\n  [0.44840, 0.10152],\n  [0.39590, 0.10360],\n  [0.34367, 0.10352],\n  [0.29315, 0.10086],\n  [0.24502, 0.09584],\n  [0.19988, 0.08874],\n  [0.15830, 0.07992],\n  [0.12080, 0.06982],\n  [0.08780, 0.05889],\n  [0.05968, 0.04762],\n  [0.03677, 0.03646],\n  [0.01920, 0.02581],\n  [0.00720, 0.01603],\n  [0.00080, 0.00737],\n  [0.00000, 0.00000],\n  [0.00467, -0.00573],\n  [0.01467, -0.00956],\n  [0.02973, -0.01157],\n  [0.04970, -0.01192],\n  [0.07428, -0.01080],\n  [0.10317, -0.00844],\n  [0.13607, -0.00513],\n  [0.17257, -0.00119],\n  [0.21235, 0.00307],\n  [0.25498, 0.00729],\n  [0.30012, 0.01112],\n  [0.34730, 0.01425],\n  [0.39618, 0.01639],\n  [0.44707, 0.01772],\n  [0.49868, 0.01871],\n  [0.55040, 0.01925],\n  [0.60167, 0.01929],\n  [0.65193, 0.01880],\n  [0.70065, 0.01780],\n  [0.74728, 0.01634],\n  [0.79130, 0.01451],\n  [0.83223, 0.01241],\n  [0.86957, 0.01017],\n  [0.90288, 0.00791],\n  [0.93180, 0.00576],\n  [0.95593, 0.00383],\n  [0.97503, 0.00221],\n  [0.98883, 0.00101],\n  [0.99722, 0.00025],\n  [1.00000, 0.00000]\n];\n\nmodule.exports = NACA6409;\n\n\n\n// WEBPACK FOOTER //\n// ./js/airfoils/NACA6409.js","function multiply(A, B) {\n  if (canMultiply(A, B)) {\n    let out = [];\n    for(let i = 0; i < A.length; i++) {\n      let sum = 0;\n      for(let j = 0; j < A[0].length; j++) {\n        sum = sum + (A[i][j] * B[j]);\n      }\n      out.push(sum);\n    }\n\n    return out;\n  }\n\n  function canMultiply(A, B) {\n    if (A[0].length === B.length) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nfunction rotation(theta) {\n  return [\n    [Math.cos(theta), -1*Math.sin(theta)],\n    [Math.sin(theta), Math.cos(theta)]\n  ];\n}\n\nfunction subtract(A, B) {\n  let out = [];\n  for(let i = 0; i < A.length; i++) {\n    out.push([A[i][0] - B[0], A[i][1] - B[1]]);\n  }\n\n  return out;\n}\n\nfunction add(A, B) {\n  let out = [];\n  for(let i = 0; i < A.length; i++) {\n    out.push([A[i][0] + B[0], A[i][1] + B[1]]);\n  }\n\n  return out;\n}\n\nfunction degToRads(deg) {\n  return deg * Math.PI/180;\n}\n\nexport { multiply, rotation, subtract, add, degToRads };\n\n\n\n// WEBPACK FOOTER //\n// ./js/math.js"],"sourceRoot":""}